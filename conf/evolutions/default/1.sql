# Create base scheme

# --- !Ups

CREATE TABLE IF NOT EXISTS "USER_INFOS" (
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "EMAIL" VARCHAR NOT NULL,
    "FAMILY_NAME" VARCHAR NOT NULL,
    "GIVEN_NAME" VARCHAR NOT NULL,
    "FULL_NAME" VARCHAR NOT NULL,
    "NICKNAME" VARCHAR NOT NULL,
    "PICTURE" VARCHAR NOT NULL,
    "LOCALE" VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS "EVENT_INFOS" (
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "EVENT_TYPE" INTEGER NOT NULL,
    "TITLE" VARCHAR NOT NULL,
    "DESCRIPTION" VARCHAR NOT NULL,
    "USER_INFO_ID_OR_NONE" BIGINT,
    "PUBLISH_DATE_UNIX_MILLIS" BIGINT NOT NULL,
    "STATUS" INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS "EVENT_REACTION_TYPES" (
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "TEXT" VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS "EVENT_REACTIONS" (
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "USER_INFO_ID" BIGINT NOT NULL,
    "EVENT_INFO_ID" BIGINT NOT NULL,
    "EVENT_REACTION_TYPE_ID" BIGINT NOT NULL
);

CREATE TABLE IF NOT EXISTS "EVENT_TAGS" (
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "TEXT" VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS "EVENT_TAG_RELATIONS" (
    "EVENT_INFO_ID" BIGINT NOT NULL,
    "EVENT_TAG_ID" BIGINT NOT NULL
);

# --- !Downs

DROP TABLE "USER_INFOS";

DROP TABLE "EVENT_INFOS";

DROP TABLE "EVENT_REACTION_TYPES";

DROP TABLE "EVENT_REACTIONS";

DROP TABLE "EVENT_TAGS";

DROP TABLE "EVENT_TAG_RELATIONS";

